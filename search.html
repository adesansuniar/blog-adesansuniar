---
layout: default
title: "Pencarian Artikel"
description: "Cari artikel berdasarkan judul, isi, tag, atau kategori dari Blog Ade Sansuniar."
permalink: /search.html
lang: "id"
---

<main role="main" itemscope itemtype="https://schema.org/SearchResultsPage"
      style="max-width: 960px; margin: auto; padding: 20px; line-height: 1.7; text-align: center;">

  <h1 style="margin-bottom: 20px;">ğŸ” Pencarian Artikel</h1>

  <!-- âœ… Tombol Filter Kategori -->
  <div style="margin-bottom: 20px;">
    {% assign popular_categories = "tips,katalog,ongkos jahit,fashion" | split: "," %}
    {% for category in popular_categories %}
      <button class="category-btn" data-category="{{ category | downcase }}" 
              style="margin: 6px; padding: 6px 12px; font-size: 0.9em; border: 1px solid #ccc; border-radius: 4px; background-color: #f1f1f1; cursor: pointer;">
        {{ category | capitalize }}
      </button>
    {% endfor %}
  </div>

  <!-- ğŸ” Kotak Pencarian -->
  <input type="text" id="search-box" placeholder="Cari berdasarkan kata, tag, atau kategori..."
         style="width: 100%; max-width: 600px; padding: 12px 16px; font-size: 1em; border: 1px solid #ccc; border-radius: 6px;" />

  <!-- ğŸ“‹ Hasil -->
  <div id="search-results" style="margin-top: 40px; text-align: left;"></div>

</main>

<!-- ğŸ”§ Script Pencarian -->
<script>
  const searchBox = document.getElementById("search-box");
  const resultsContainer = document.getElementById("search-results");
  const categoryButtons = document.querySelectorAll(".category-btn");

  let posts = [];

  // ğŸ§  Fetch data
  fetch("{{ '/search.json' | relative_url }}")
    .then(res => res.json())
    .then(data => {
      posts = data;
    })
    .catch(err => {
      resultsContainer.innerHTML = "<p style='color: #b00;'>Gagal memuat data pencarian.</p>";
    });

  // ğŸ” Tampilkan hasil
  function tampilkanHasil(query) {
    resultsContainer.innerHTML = "";

    if (query.length < 2) return;

    const filtered = posts.filter(post => {
      const tags = Array.isArray(post.tags) ? post.tags : [];
      const categories = Array.isArray(post.categories) ? post.categories : [];

      return (
        post.title?.toLowerCase().includes(query) ||
        post.description?.toLowerCase().includes(query) ||
        post.content?.toLowerCase().includes(query) ||
        tags.some(tag => tag.toLowerCase().includes(query)) ||
        categories.some(cat => cat.toLowerCase().includes(query))
      );
    });

    if (filtered.length === 0) {
      resultsContainer.innerHTML = "<p style='text-align:center;'>ğŸ” Tidak ditemukan hasil pencarian.</p>";
      return;
    }

    filtered.forEach(post => {
      const tags = Array.isArray(post.tags) ? post.tags.join(', ') : 'â€“';
      const categories = Array.isArray(post.categories) ? post.categories.join(', ') : 'â€“';
      const el = document.createElement("div");

      el.innerHTML = `
        <h3 style="margin-bottom: 5px;">
          <a href="${post.url}" style="color: #2b6777;">${post.title}</a>
        </h3>
        <p style="font-size: 0.9em; color: #555;">${post.description || ''}</p>
        <p style="font-size: 0.8em; color: #888;">
          ğŸ·ï¸ <strong>Tags:</strong> ${tags} |
          ğŸ“‚ <strong>Kategori:</strong> ${categories}
        </p>
        <hr style="margin: 20px 0;" />
      `;

      resultsContainer.appendChild(el);
    });
  }

  // ğŸ•’ Debounce input
  let debounce;
  searchBox.addEventListener("input", function () {
    clearTimeout(debounce);
    const query = this.value.toLowerCase().trim();
    debounce = setTimeout(() => tampilkanHasil(query), 300);
  });

  // ğŸ”˜ Klik kategori
  categoryButtons.forEach(btn => {
    btn.addEventListener("click", function () {
      const category = this.getAttribute("data-category");
      searchBox.value = category;
      tampilkanHasil(category);
    });
  });

  // ğŸ“± Fokus otomatis
  document.addEventListener("DOMContentLoaded", () => {
    searchBox.focus();
  });
</script>

<!-- ğŸ§¬ JSON-LD Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SearchAction",
  "target": "{{ site.url }}/search.html?q={search_term_string}",
  "query-input": "required name=search_term_string"
}
</script>
